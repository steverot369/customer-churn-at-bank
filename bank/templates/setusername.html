{% if 'manager' == logintype %}
    {% include 'managersidebar.html' %}
{% elif 'clerk' == logintype %}
    {% include 'clerksidebar.html' %}
{% else %}
    {% include 'customersidebar.html' %}
{% endif %}

                <section class="middle">
                    <div class="header">
                        
                        <input type="date">
                    </div>
                  
                  {% if count == 'yes' %}
                  <h1>you have already set your username and password</h1>
                    {% else %}
                        
                    
                    <div class="container54">
	
                        <div class="form-container sign-in-container">
                        <form  method="post">
                                <h1>change username & password</h1>
                                <div class="social-container">
                                    <a href="#" class="social" style="text-decoration: none;"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#" class="social"style="text-decoration: none;"><i class="fab fa-google-plus-g"></i></a>
                                    <a href="#" class="social" style="text-decoration: none;"><i class="fab fa-linkedin-in"></i></a>
                                </div>
                               
                                <div class="mb-4 pb-2">
                                    <div class="form-outline form-white">
                                      <input type="text" id="usernameInput" name="username" class="form-control form-control-lg" pattern="[A-Za-z0-9]{6,}" required/>
                                      <label class="form-label" for="form3Examplea2">username</label>
                                      <div id="usernameMessage" style="font-size:15px; font-weight:600;"></div>
                                      <span id="message" style="font-size: 14px; font-weight:600;"></span>
                                    </div>
                                  </div>
                                <ul id="usernameList">
                                  {% for uname in uname %}
                                  <li style="display: none;">{{ uname }}</li>
                                  {% endfor %}
                                </ul>
                                <div id="usernameSuggestionList"></div>
                                <div class="mb-4 pb-2">
                                                 
                                              
                        
                                    <div class="input-group">  
                                      <input type="password" id="passwordInput" name="password" class="form-control form-control-lg" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required/>
                                      

                                      <div class="input-group-append">
                                        <span class="input-group-text">
                                          <i id="togglePassword" class="fa fa-eye"></i>
                                        </span>
                                      </div>
                                    </div>
                                    <label class="form-label" for="form3Examplea2">password</label>
                                    <div id="passwordMessage" class="password-message" style="font-size: 15px; font-weight:600;"></div>
                                  
                                </div>
                               
                          <input type="submit" name="add"  value="change" class="button"/>
                            </form>
                        </div>
                       
                    </div>
                    {% endif %}
             </section>
                
            </main>  
    <!-- ====================end of aside==========================   -->
    <script>
        // JavaScript
var usernameInput = document.getElementById('usernameInput');
var usernameList = document.getElementById('usernameList').getElementsByTagName('li');
var message = document.getElementById('message');
var usernameMessage = document.getElementById('usernameMessage');
var usernameSuggestionList = document.getElementById('usernameSuggestionList');
var isUsernameTaken = false;

// Add event listener to input field
usernameInput.addEventListener('input', function() {
  var inputValue = usernameInput.value.trim().toLowerCase();

  // Check if the input value matches any username
  isUsernameTaken = Array.from(usernameList).some(function(username) {
    return username.textContent.trim().toLowerCase() === inputValue;
  });

  // Display appropriate message based on the result
  if (isUsernameTaken) {
    message.textContent = 'Username ' + inputValue + ' already in use.';
    message.style.color = 'red';
    usernameMessage.textContent = '';
  } else {
    message.textContent = '';
    validateUsername();
    showUsernameSuggestions(inputValue); // Call the function to show suggestions
  }
});

function validateUsername() {
  const username = usernameInput.value.trim();

  if (username.length >= 5 && /^[a-zA-Z0-9_]+$/.test(username)) {
    showValidationMessage('Valid username', 'valid');
  } else if (/[^a-zA-Z0-9_]/.test(username)) {
    showValidationMessage('Username must not contain special characters', 'invalid');
  } else {
    showValidationMessage('Username must contain at least 5 characters', 'invalid');
  }
}

function showValidationMessage(message, className) {
  usernameMessage.textContent = message;
  usernameMessage.className = className;
  usernameMessage.style.color = className === 'valid' ? 'green' : 'red';
}

function showUsernameSuggestions(inputValue) {
  // Rest of the function remains the same
  // ...
  const maxRandomNumber = 9999; // Change this to set the maximum random number limit
  const numberOfSuggestions = 3; // Change this to set the number of suggestions to display

  // Clear the previous suggestions
  usernameSuggestionList.innerHTML = '';

  // Generate suggestions based on the input value
  const filteredSuggestions = [];
  for (let i = 0; i < numberOfSuggestions; i++) {
    const randomNumber = Math.floor(Math.random() * maxRandomNumber);
    const suggestedUsername = `${inputValue}${randomNumber}`;
    filteredSuggestions.push(suggestedUsername);
  }

  // Display the generated suggestions
  if (filteredSuggestions.length > 0) {
    const suggestionList = document.createElement('ul');
    filteredSuggestions.forEach(function(username) {
      const suggestionItem = document.createElement('li');
      suggestionItem.textContent = username;
      suggestionList.appendChild(suggestionItem);
    });
    usernameSuggestionList.appendChild(suggestionList);
  }
  // Add event listener to suggested usernames
usernameSuggestionList.addEventListener('click', function(event) {
  // Check if a suggested username was clicked
  if (event.target.tagName === 'LI') {
    const suggestedUsername = event.target.textContent.trim();
    usernameInput.value = suggestedUsername; // Fill the username form field with the suggested username
  }
});

}


      </script>
      
        
      <script>
        const togglePassword = document.querySelector('#togglePassword');
        const passwordInput1 = document.querySelector('#passwordInput1');
      
        togglePassword.addEventListener('click', function (e) {
          const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
          passwordInput.setAttribute('type', type);
          this.classList.toggle('fa-eye-slash');
          this.classList.toggle('fa-eye');
        });
      
        const passwordInput = document.getElementById('passwordInput');
        const passwordMessage = document.getElementById('passwordMessage');
      
        const passwordCriteria = {
          minLength: 8,
          hasNumber: /\d/,
          hasUppercase: /[A-Z]/,
          hasLowercase: /[a-z]/,
          hasSpecialChar: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/
        };
      
        passwordInput.addEventListener('input', () => {
          const password = passwordInput.value;
          let valid = true;
          let message = '';
      
          if (password.length < passwordCriteria.minLength) {
            message += `Password must be at least ${passwordCriteria.minLength} characters long. `;
            valid = false;
          } else {
            valid = true; // Update valid to true if the length criteria is met
          }
      
          if (!passwordCriteria.hasNumber.test(password)) {
            message += 'Password must contain at least one number. ';
            valid = false;
          }
      
          if (!passwordCriteria.hasUppercase.test(password)) {
            message += 'Password must contain at least one uppercase letter. ';
            valid = false;
          }
      
          if (!passwordCriteria.hasLowercase.test(password)) {
            message += 'Password must contain at least one lowercase letter. ';
            valid = false;
          }
      
          if (!passwordCriteria.hasSpecialChar.test(password)) {
            message += 'Password must contain at least one special character. ';
            valid = false;
          }
      
          if (valid) {
            message = 'Password is valid';
            passwordMessage.style.color = 'green';
          } else {
            
            passwordMessage.style.color = 'red';
          }
      
          passwordMessage.textContent = message;
        });
      </script>
      
      
</body>

</html>