<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale">
<title>Responsive Dashboard using HTML CSS and JavaScript </title>
<!-- MATERIAL CDN  -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp"
rel="stylesheet">
<!-- google font -->

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,500;1,700&display=swap" rel="stylesheet">
<!-- STYLESHEET -->
<script src="https://kit.fontawesome.com/c7705f70af.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<link rel="stylesheet" href="/static/css/customer.css">
<style>
 .container1 {
  padding: 20px;
  border-radius: 10px;
 

  background-color: #fff5;

    backdrop-filter: blur(10px);
    box-shadow: 0 .4rem .9rem #0005;
    border-radius: 1rem;
    height: 98%;
}

section {
  margin-bottom: 20px;
  font-family: Arial, sans-serif;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
  font-weight: bold;
}


.search-input,
.filter,
#rowCount {
  margin-bottom: 10px;
  padding: 8px;
  border: none;
  border-radius: 4px;
  background-color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: box-shadow 0.3s ease;
}

.search-input:focus,
.filter:focus,
#rowCount:focus {
  outline: none;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.filter {
  width: 150px;
}


@keyframes scaleAnimation {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

#rowCount {
  animation: scaleAnimation 1s infinite;
}


.table {
  width: 100%;
  border-collapse: collapse;
  border-radius: 8px;
  overflow: hidden;
  background-color: #fff5;

    backdrop-filter: blur(7px);
    box-shadow: 0 .4rem .8rem #0005;
    border-radius: .8rem;
    font-size: 14px;
    
}
th{
    font-weight: 750;
}
.table th,
.table td {

  width: 100%;
    height: 10%;
    background-color: #fff4;
    padding: .8rem 1rem;

  
    justify-content: space-between;
    align-items: center
}

.table th {
  background-color: #ffffff;
  text-align: left;
}

.table tbody tr:nth-child(even) {
  background-color: rgba(248, 245, 245, 0.267);
}
.table tbody tr:hover {
  background-color: #e6e6e6;
}


.pagination {
  display: flex;
  justify-content: center;
  margin-top: 10px;
}

.pagination button {
  margin: 0 5px;
  padding: 5px 10px;
  border: none;
  background-color: #f2f2f2;
  cursor: pointer;
}

.pagination button.active {
  background-color: #4CAF50;
  color: white;
}

.btn {
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
  color: #fff;
  background-color: #007bff;
}

.btn-danger {
  background-color: #dc3545;
}

.btn-info {
  background-color: #17a2b8;
} 
#noUserFoundMessage {
  display: none;
  padding: 50px;
  background-color: #f2f2f2;
  text-align: center;
  
}

#noUserFoundMessage p {
  color: rgb(173, 24, 24);
  font-weight: bold;
  font-size: 30px;

}




i{
  cursor: pointer;
  /* padding: 10px; */
}
.submenu {
    display: none;
    padding-left: 80px;
   
}

.show {
    display: block;
}
</style>
</head>
{% with messages = get_flashed_messages() %}
{% if messages %}
  <ul class=flashes>
  {% for message in messages %}
    <script type="text/javascript">alert("{{message}}")</script>
  {% endfor %}
  </ul>
{% endif %}
{% endwith %}
<body>
    <nav>
        <div class="container" style="right:14%">
            <img src="/static/images/logo3.png" class="logo">
            <div class="search-bar">
                <span class="material-icons-sharp">search</span>
                <input type="search" placeholder="search">
            </div>
            <div class="profile-area" style="padding-left: 117%;">
                <div class="theme-btn">
                    <span class="material-icons-sharp active">light_mode</span>
                    <span class="material-icons-sharp">dark_mode</span>

                </div>
                <div class="profile">
                    <div class="profile-photo">
                        <img src="/static/images/profile-2.jpg" style="width: 100%;">
                    </div>
                
                <h5>{{name}}</h5>
                <span class="material-icons-sharp">expand_more</span>
            </div>
            <button id="menu-btn">
                <span class="material-icons-sharp">menu</span>
            </button>
                </div>
        </div>
    </nav>
  
    <!-- end of navbar     -->
            <main>
                <aside >
                   <button id="close-btn">
                        <span class="material-icons-sharp">close</span>
                   </button>
                   <div class="sidebar" class="active">
                    <a href="adminhome" style="text-decoration: none;">
                      <span class="material-icons-sharp">dashboard</span>
                      <h4>Dashboard</h4>
                  </a>
                  <a href="#" class="menu-link" style="text-decoration: none;">
                    <span class="material-icons-sharp submenu-icon">expand_circle_down</span>
                    <h4>employee</h4>
                  
                </a>
                <div class="submenu">
                    <a href="adminaddemployee" style="text-decoration: none;">add employee</a>
                    
                    <a href="adminmanagemployee" style="text-decoration: none;">Manage employee</a>
                    
                </div>
                
                <a href="#" class="menu-link" style="text-decoration: none;">
                    <span class="material-icons-sharp submenu-icon">expand_circle_down</span>
                    <h4>Branch</h4>
                    
                </a>
                <div class="submenu">
                    <a href="adminaddbranch" style="text-decoration: none;">add branch</a>
                    <a href="#" style="text-decoration: none;">view branch</a>
                
                </div>
                
                <!-- Add more menu-link and submenu sections as needed -->
                <a href="#" class="menu-link" style="text-decoration: none;">
                  <span class="material-icons-sharp submenu-icon">group</span>
                  <h4>customers</h4>
                  
              </a>
              
                 
                  
                  <a href="/adminviewtranasction" style="text-decoration: none;">
                    
                    <span class="material-icons-sharp">stacked_bar_chart</span>
                    <h4>transactions</h4>
                </a>
          
              <a href="/adminviewtranasction" style="text-decoration: none;">
                    
                <span class="material-icons-sharp">mark_email_unread</span>
                <h4>feedback</h4>
            </a>
            <a href="/adminviewtranasction" style="text-decoration: none;">
                    
              <span class="material-icons-sharp">speaker_notes</span>
              <h4>complaint</h4>
          </a>
                  <a href="#" style="text-decoration: none;">
                      <span class="material-icons-sharp">settings</span>
                      <h4>Settings</h4>
                  </a>
                 </div>
                   </div>
                   <!---------end of side bar--- -->
                   <div class="updates">
                        <span class="material-icons-sharp">keyboard_return</span>
                            <h4>Go back</h4>
                            <p>to home page</p>
                          
                            <a href="adminhome" style="text-decoration: none;">Go Back</a>
                    </div>
                </aside>
                 <!-- end of aside----- -->

                 <div class="container1">
        <section>
            <h1>Employee Details</h1>
            <div class="search-filter">
                <input type="search" id="searchInput" class="search-input" onkeyup="searchTable()" placeholder="Search by name">
                <select id="userTypeFilter" class="filter">
                  <option disabled selected value="">Branch names</option>


                  {% for branch in branch_names %}
                  <option value="{{ branch }}">{{ branch }}</option>
                  {% endfor %}
                </select>
                
                <label for="rowCount">Select number of rows:</label>
                <select id="rowCount" onchange="changeRowCount()">
                  <option disabled selected value="">Select no of rows</option>
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                </select>
                <select id="genderOption" class="filter">
                  <option value="">Select employee type</option>
                  <option value="clerk">clerk</option>
                  <option value="manager">manager</option>
              </select>
            </div>
          <form method="post">  
            <table id="employeeTable" class="table">
                <thead class="thead-light">
                    <tr>
                        <th>Name</th>
                        <th>Age</th>
                        <th>Marital Status</th>
                        
                        <th id="genderHeader">Gender</th>
                        <th>Branch</th>
                        
                        <th> Employee Type</th>
                        <th>Address</th>
                        <th>Place</th>
                        <th>District</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th colspan="2">Manage</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Employee details data -->
                    {% for employee in employees %}
                    <tr data-usertype="{{ employee[9] }}">
                        <td><img src="{{url_for('static', filename=employee[6])}}" style="width: 60px;height: 60px;border-radius: 50%;">{{ employee[3] }} {{ employee[4] }}</td>
                        <td>{{ employee[5] }}</td>
                        
                        <td>{{ employee[7] }}</td>
                        <td>{{ employee[8] }}</td>
                        <td>{{ employee[9] }}</td>
                        <td>{{ employee[10] }}</td>
                        <td>{{ employee[11] }}</td>
                        <td>{{ employee[13] }}</td>
                        <td>{{ employee[14] }}</td>
                        <td>{{ employee[15] }}</td>
                        <td>{{ employee[16] }}</td>
                        
                        <td>
                          <td>
                            <a href="{{ url_for('admin.viewdetails', name1=employee[3],name2=employee[4], age=employee[5], image=employee[6], maritalStatus=employee[7], gender=employee[8], branch=employee[9], employeeType=employee[10], address=employee[11], place=employee[13], district=employee[14], phone=employee[15], email=employee[16]) }}" class="btn btn-info">View Details</a>
                          </td>
                          
                          
  
                      </tr>
                    
                    {% endfor %}
                    
                </tbody>
            </table>
          </form>
            <div class="pagination">
                <button onclick="previousPage()">Previous</button>
                <button onclick="nextPage()">Next</button>
            </div>
            <div id="noUserFoundMessage" style="display: none;">
              <p>No user found</p>
            </div>
        </section>
    </div>
    
            </main>  
    <!-- ====================end of aside==========================   -->
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    
 // Get all the submenu icons
 var submenuIcons = document.querySelectorAll('.submenu-icon');
// Loop through each submenu icon
submenuIcons.forEach(function(icon) {
   // Add a click event listener to each submenu icon
   icon.addEventListener('click', function() {
       // Get the corresponding submenu for this icon
       var submenu = icon.parentElement.nextElementSibling; 
       // Toggle the visibility of the submenu
       submenu.classList.toggle('show');
   });
});


    function showDetails(event) {
    event.preventDefault();
    var row = event.target.closest("tr");
    var detailsRow = row.nextElementSibling;
    if (detailsRow.style.display === "none") {
      detailsRow.style.display = "table-row";
    } else {
      detailsRow.style.display = "none";
    }
  }

//ffffff





//efefff


//gender
var employeeTable = document.getElementById("employeeTable");
    var genderSelect = document.getElementById("genderOption");

    genderSelect.addEventListener("change", function() {
        var selectedGender = genderSelect.value.toLowerCase();
        var rows = employeeTable.getElementsByTagName("tr");

        for (var i = 1; i < rows.length; i++) { // Start from index 1 to skip the table header row
            var row = rows[i];
            var genderCell = row.getElementsByTagName("td")[5];
            var gender = genderCell.textContent.toLowerCase();

            if (selectedGender === "" || gender === selectedGender) {
                row.style.display = ""; // Show the row
            } else {
                row.style.display = "none"; // Hide the row
            }
        }
    });


// Add event listener to the "Employee Type" header
 // Function to sort the table based on gender

//end
        // Function to filter the table based on user type
        document.getElementById('userTypeFilter').addEventListener('change', function() {
  var searchKeyword = document.getElementById('searchInput').value.toLowerCase();
  var userType = this.value;
  var rows = document.querySelectorAll('#employeeTable tbody tr');
  
  rows.forEach(function(row) {
    var employeeName = row.children[1].textContent.toLowerCase() + ' ' + row.children[2].textContent.toLowerCase();
    var userRole = row.getAttribute('data-usertype');
    if ((searchKeyword === '' || employeeName.includes(searchKeyword)) && (userType === 'all' || userRole === userType)) {
      row.style.display = '';
    } else {
      row.style.display = 'none';
    }
  });
});

        // Function to search the table based on name
        function searchTable() {
  var input = document.getElementById("searchInput");
  var filter = input.value.toUpperCase();
  var table = document.getElementById("employeeTable");
  var rows = table.getElementsByTagName("tr");
  var noUserFoundMessage = document.getElementById("noUserFoundMessage");

  var foundMatch = false;

  for (var i = 1; i < rows.length; i++) {
    var nameColumn = rows[i].getElementsByTagName("td")[0];
    if (nameColumn.innerHTML.toUpperCase().indexOf(filter) > -1) {
      rows[i].style.display = "";
      foundMatch = true;
    } else {
      rows[i].style.display = "none";
    }
  }

  if (!foundMatch) {
    noUserFoundMessage.style.display = "block";
  } else {
    noUserFoundMessage.style.display = "none";
  }
}







        // ------------------------
        function changeRowCount() {
    const rowCountSelect = document.getElementById('rowCount');
    const selectedRowCount = rowCountSelect.value;
    const rows = employeeTable.getElementsByTagName('tr');

    for (let i = 1; i < rows.length; i++) {
        if (i <= selectedRowCount) {
            rows[i].style.display = '';
        } else {
            rows[i].style.display = 'none';
        }
    }
}
document.addEventListener('DOMContentLoaded', () => {
    const rowCountSelect = document.getElementById('rowCount');
    const selectedRowCount = rowCountSelect.value;
    const rows = employeeTable.getElementsByTagName('tr');

    for (let i = 1; i < rows.length; i++) {
        if (i > selectedRowCount) {
            rows[i].style.display = 'none';
        }
    }
});
const rowsPerPage = 5; // Number of rows to display per page
let currentPage = 1;

function showRows() {
    const startIndex = (currentPage - 1) * rowsPerPage;
    const endIndex = startIndex + rowsPerPage;
    const rows = employeeTable.getElementsByTagName('tr');

    for (let i = 1; i < rows.length; i++) {
        if (i >= startIndex && i < endIndex) {
            rows[i].style.display = '';
        } else {
            rows[i].style.display = 'none';
        }
    }
}

function previousPage() {
    if (currentPage > 1) {
        currentPage--;
        showRows();
    }
}

function nextPage() {
    const rows = employeeTable.getElementsByTagName('tr');
    const totalRows = rows.length - 1;
    const totalPages = Math.ceil(totalRows / rowsPerPage);

    if (currentPage < totalPages) {
        currentPage++;
        showRows();
    }
}

// Add this code after the existing JavaScript code within the <script> tags
document.addEventListener('DOMContentLoaded', () => {
    showRows();
});

    </script>
</body>
</html>